{"ast":null,"code":"var _jsxFileName = \"/tmp/Webserv/website/src/navbar.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport logo42 from './assets/images/logo-42.png';\nimport darklogo42 from './assets/images/42-dark-logo.png';\nimport './assets/styles/navbar.css';\nimport { Link } from 'react-router-dom';\nimport { isThemeSet } from './choose_theme';\nimport { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst isLightTheme = isThemeSet();\nfunction useIsLogged() {\n  _s();\n  const [sessionData, setSessionData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    const fetchDatabase = async () => {\n      try {\n        const response = await fetch('http://localhost:8081/database', {\n          method: 'GET',\n          headers: {\n            'db_password': 'strongpassword'\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Erreur lors de la récupération des données');\n        }\n        const database = await response.json();\n        const cookies = document.cookie;\n        let cookieFound = cookies.split(';').find(el => el.trim().split('=')[0] === \"session_id\");\n        let session_id;\n        if (cookieFound) {\n          session_id = cookieFound.split(\"=\")[1];\n        }\n        if (isMounted && database[\"sessions\"] && session_id && database[\"sessions\"][session_id]) {\n          setSessionData(database[\"sessions\"][session_id]);\n        } else {\n          setSessionData(null);\n        }\n        setLoading(false);\n      } catch (err) {\n        if (isMounted) {\n          setError(err.message);\n          setLoading(false);\n        }\n      }\n    };\n    fetchDatabase();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return {\n    sessionData,\n    loading,\n    error\n  };\n}\n_s(useIsLogged, \"iny8GZmz5pw1HaBF3Ckp2rKD9mo=\");\nexport function NavBar() {\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    id: isLightTheme ? 'navBarLight' : 'navBar',\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/actions\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Webserv\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(LoginLink, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"https://42.fr/en/homepage/\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"navLogo\",\n        src: isLightTheme ? darklogo42 : logo42,\n        alt: \"logo-42\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 3\n  }, this);\n}\n_c = NavBar;\nfunction LoginLink() {\n  _s2();\n  const {\n    sessionData\n  } = useIsLogged();\n  if (!sessionData) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"signInDiv\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Hello \", sessionData]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(LogOut, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n}\n_s2(LoginLink, \"VSgyc9YguiNduOUwot17pfBd1hk=\", false, function () {\n  return [useIsLogged];\n});\n_c2 = LoginLink;\nfunction LogOut() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"POST\",\n      action: \"/logout\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"unset-cookie\",\n        value: \"session-id\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 3\n    }, this)\n  }, void 0, false);\n}\n_c3 = LogOut;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"NavBar\");\n$RefreshReg$(_c2, \"LoginLink\");\n$RefreshReg$(_c3, \"LogOut\");","map":{"version":3,"names":["React","logo42","darklogo42","Link","isThemeSet","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","isLightTheme","useIsLogged","_s","sessionData","setSessionData","loading","setLoading","error","setError","isMounted","fetchDatabase","response","fetch","method","headers","ok","Error","database","json","cookies","document","cookie","cookieFound","split","find","el","trim","session_id","err","message","NavBar","id","children","to","fileName","_jsxFileName","lineNumber","columnNumber","LoginLink","src","alt","_c","_s2","LogOut","_c2","action","type","name","value","_c3","$RefreshReg$"],"sources":["/tmp/Webserv/website/src/navbar.js"],"sourcesContent":["import React from 'react';\nimport logo42 from './assets/images/logo-42.png';\nimport darklogo42 from './assets/images/42-dark-logo.png';\nimport './assets/styles/navbar.css'\nimport { Link } from 'react-router-dom';\nimport {isThemeSet} from './choose_theme';\nimport { useState, useEffect } from 'react';\n\n\nconst isLightTheme = isThemeSet();\n\nfunction useIsLogged() {\n    const [sessionData, setSessionData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        let isMounted = true;\n\n        const fetchDatabase = async () => {\n            try {\n                const response = await fetch('http://localhost:8081/database', {\n                    method: 'GET',\n                    headers: {\n                        'db_password': 'strongpassword',\n                    },\n                });\n\n                if (!response.ok) {\n                    throw new Error('Erreur lors de la récupération des données');\n                }\n\n                const database = await response.json();\n\n                const cookies = document.cookie;\n                let cookieFound = cookies.split(';').find(el => el.trim().split('=')[0] === \"session_id\");\n                let session_id;\n                if (cookieFound) {\n                    session_id = cookieFound.split(\"=\")[1];\n                }\n\n                if (isMounted && database[\"sessions\"] && session_id && database[\"sessions\"][session_id]) {\n                    setSessionData(database[\"sessions\"][session_id]);\n                } else {\n                    setSessionData(null);\n                }\n                setLoading(false);\n\n            } catch (err) {\n                if (isMounted) {\n                    setError(err.message);\n                    setLoading(false);\n                }\n            }\n        };\n\n        fetchDatabase();\n\n        return () => {\n            isMounted = false;\n        };\n    }, []);\n\n    return { sessionData, loading, error };\n}\n\nexport function NavBar()\n{\n\treturn (\n\t\t<nav id={isLightTheme ? 'navBarLight' : 'navBar'} >\n\t\t\t<Link to=\"/actions\">\n\t\t\t\t<div>Webserv</div>\n\t\t\t</Link>\n\t\t\t<LoginLink />\n\t\t\t<Link to=\"https://42.fr/en/homepage/\">\n\t\t\t\t<img id='navLogo' src={isLightTheme ? darklogo42 : logo42} alt='logo-42'></img>\n\t\t\t</Link>\n\t\t</nav>\n\t)\n}\n\nfunction LoginLink()\n{\n\tconst { sessionData } = useIsLogged();\n\tif (!sessionData)\n\t{\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t<div id='signInDiv'>Sign in</div>\n\t\t\t\t</Link>\n\t\t\t</>\n\t\t)\n\t}\n\telse\n\t{\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div>Hello {sessionData}</div>\n\t\t\t\t<LogOut />\n\t\t\t</>\n\t\t)\n\t}\n}\n\nfunction LogOut()\n{\n\treturn (\n\t\t<>\n\t\t<form method=\"POST\" action='/logout'>\n\t\t\t<input type=\"hidden\" name=\"unset-cookie\" value=\"session-id\" />\n\t\t\t<button type=\"submit\">Log out</button>\n\t\t</form>\n\t\t</>\n\t)\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}